#!/bin/bash

SUDO=sudo; [ $EUID -eq 0 ] && SUDO=''
readonly SYNAPTIC_PREF_FILESPEC=/var/lib/synaptic/preferences
readonly APT_PREF_LINK_TO_SYNAPTIC=/etc/apt/preferences.d/synaptic

printUsage()
{
    cat <<HELPTEXT
Synaptic uses its own pinning file, but it can be linked with apt so that both
share the same pinned package versions.
HELPTEXT
    echo
    printf 'Usage: %s%q %s\n' "${SUDO}${SUDO:+ }" "$(basename "$1")" '[--check] [-?|-h|--help]'
}
case "$1" in
    --help|-h|-\?)	shift; printUsage "$0"; exit 0;;
    --check)		shift; [ -h "$APT_PREF_LINK_TO_SYNAPTIC" ]; exit $?;;
esac

$SUDO ln -s "$SYNAPTIC_PREF_FILESPEC" "$APT_PREF_LINK_TO_SYNAPTIC"
