#!/bin/bash
set -e

readonly SYNAPTIC_PREF_FILESPEC=/var/lib/synaptic/preferences
readonly APT_PREF_LINK_TO_SYNAPTIC=/etc/apt/preferences.d/synaptic

printUsage()
{
    cat <<HELPTEXT
Synaptic uses its own pinning file, but it can be linked with apt so that both
share the same pinned package versions.
HELPTEXT
    echo
    printf 'Usage: [DEBUG=sudo[!]] %q %s\n' "$(basename "$1")" '[--check] [-?|-h|--help]'
}
case "$1" in
    --help|-h|-\?)	shift; printUsage "$0"; exit 0;;
esac

touch-p --sudo --no-update --verbose "$SYNAPTIC_PREF_FILESPEC"
exec addSymlink "$@" --accept-up-to-date --sudo --force -- "$SYNAPTIC_PREF_FILESPEC" "$APT_PREF_LINK_TO_SYNAPTIC"
