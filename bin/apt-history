#!/bin/bash

{ cat /var/log/apt/history.log; zcat /var/log/apt/history.log.*.gz; } |
    if [ $# -ge 1 ]; then
	egrep --text -e "^Start-Date:" -e "^End-Date:" -e "$1" |
	    sed -e '/^Start-Date:/ { N; /\nEnd-Date:/d }' -e '/^End-Date:/G'
    else
	cat
    fi |
    less --RAW-CONTROL-CHARS
